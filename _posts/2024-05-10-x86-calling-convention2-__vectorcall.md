---
layout: post
title: x86 함수 호출 규약 정리 (2) - __vectorcall
category: c-cpp
---

## 매개변수 전달
왼쪽 -> 오른쪽 순서로 처음 두 개 정수 => ECX, EDX

this 포인터는 ECX

왼쪽 -> 오른쪽 순서로 처음 6개 벡터 형식 XMM0 ~ XMM5
7번째부터 스택에 저장

구조체/클래스는 스택으로 전달

스택에 저장되는 값들은 오른쪽 -> 왼쪽 적용

## 반환

|32비트 이하 (정수 및 정수구조체)|64비트 이하 (정수 및 정수구조체)|벡터 형식|
|:---:|:---:|:---:|
|EAX|EDX:EAX|XMM0, XMM0:XMM3|

나머지(클래스 및 64비트를 넘어가는 정수/구조체/공용체, XMM0:XMM3에 들어갈 수 없는 벡터)는 호출자 스택의 메모리 참조 반환

## 스택정리
호출자가 정리

---

얘도 일단 이정도만 알면 될 것 같다.